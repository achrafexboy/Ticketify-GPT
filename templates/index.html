<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>(Evodev) Ticket notifier</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>

<body>
    <div class="app-container">
        <div class="app-header">
            <h1 class="app-title">GPT Notifier</h1>
            <p class="app-subtitle">Get intelligent tickets and share them with devs</p>
        </div>

        <div class="card">
            <div class="card-header">
                <h2 class="card-title">
                    Fill Your request
                    {% if config.TEST_MODE %}
                    <span class="test-mode-badge">Test Mode</span>
                    {% endif %}
                </h2>
            </div>
            <div class="card-body">
                <form id="assistantForm" enctype="multipart/form-data">
                    <div class="mb-4">
                        <label for="description" class="form-label">What is the client's request or issue?</label>
                        <textarea class="form-control" id="description" name="description" placeholder="Describe your question or request in detail..." rows="4" required></textarea>
                    </div>
                    
                    <div class="mb-4">
                        <label class="form-label">Photos (Optional)</label>
                        <div class="file-upload-container" id="file-upload-container">
                            <div class="file-upload-icon">ðŸ“¸</div>
                            <p class="file-upload-text">Drag & drop images here or click to browse</p>
                            <p class="small text-muted">Supported formats: JPG, PNG, GIF</p>
                            <input class="d-none" type="file" id="photos" name="photos" multiple accept="image/*">
                        </div>
                        <div id="preview" class="mt-2"></div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary" id="submitBtn">
                        <span class="spinner-container d-none" id="submitSpinner">
                            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                        </span>
                        Help me write this ticket
                    </button>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="0.5" stroke="currentColor" class="size-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z" />
                    </svg>                      
                </form>
                
                <div id="responseContainer" class="response-container mt-4 d-none">
                    <div class="response-header">
                        <div class="response-icon">ðŸ’¬</div>
                        <h3 class="response-title">Edit Before Sending to Slack</h3>
                    </div>
                    <div class="mb-4">
                        <textarea class="form-control" id="editableResponse" rows="8" placeholder="AI response will appear here..."></textarea>
                        <div class="form-text mt-2">Feel free to edit this response before sharing it with your team.</div>
                    </div>
                    
                    <button class="btn btn-success" id="sendToSlackBtn">
                        <span class="spinner-container d-none" id="slackSpinner">
                            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                        </span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-slack me-2" viewBox="0 0 16 16">
                            <path d="M3.362 10.11c0 .926-.756 1.681-1.681 1.681S0 11.036 0 10.111C0 9.186.756 8.43 1.68 8.43h1.682v1.68zm.846 0c0-.924.756-1.68 1.681-1.68s1.681.756 1.681 1.68v4.21c0 .924-.756 1.68-1.68 1.68a1.685 1.685 0 0 1-1.682-1.68v-4.21zM5.89 3.362c-.926 0-1.682-.756-1.682-1.681S4.964 0 5.89 0s1.68.756 1.68 1.68v1.682H5.89zm0 .846c.924 0 1.68.756 1.68 1.681S6.814 7.57 5.89 7.57H1.68C.757 7.57 0 6.814 0 5.89c0-.926.756-1.682 1.68-1.682H5.89zm6.749 1.682c0-.926.755-1.682 1.68-1.682.925 0 1.681.756 1.681 1.681s-.756 1.681-1.68 1.681h-1.681V5.89zm-.848 0c0 .924-.755 1.68-1.68 1.68A1.685 1.685 0 0 1 8.43 5.89V1.68C8.43.757 9.186 0 10.11 0c.926 0 1.681.756 1.681 1.68v4.21zm-1.681 6.748c.926 0 1.682.756 1.682 1.681S11.036 16 10.11 16s-1.681-.756-1.681-1.68v-1.682h1.68zm0-.847c-.924 0-1.68-.755-1.68-1.68 0-.925.756-1.681 1.68-1.681h4.21c.924 0 1.68.756 1.68 1.68 0 .926-.756 1.681-1.68 1.681h-4.21z"/>
                        </svg>
                        Send to Slack
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>